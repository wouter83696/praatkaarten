<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Praatkaarten</title>
<style>
  :root {
    --gap:18px;
    --radius:16px;
    --shadow:0 14px 50px rgba(0,0,0,.12);
    --shadowHover:0 18px 70px rgba(0,0,0,.16);
  }
  *{box-sizing:border-box}
  body{margin:0;background:#fff;font-family:system-ui}
  .controlsBar{position:fixed;left:0;right:0;bottom:0;z-index:50;padding:12px 18px calc(12px + env(safe-area-inset-bottom));background:rgba(255,255,255,.86);backdrop-filter:blur(10px);}
  .controlsBar .inner{max-width:1600px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between;}
  .btn{appearance:none;border:0;background:transparent;border-radius:999px;padding:10px 10px;font-size:13px;cursor:pointer;color:rgba(11,18,32,.78);} 
  .btn:hover{background:rgba(0,0,0,.04);} 
  .btn:active{transform:translateY(1px);} 
  .btnGroup{display:flex;align-items:center;gap:0;} 
  .sep{width:1px;height:18px;background:rgba(0,0,0,.12);margin:0 8px;}
  .btn:active{transform:translateY(1px);}
  .help{color:rgba(11,18,32,.55);font-size:13px;white-space:normal;}
  .grid{display:grid;gap:var(--gap);padding:18px 28px 120px;max-width:1600px;margin:auto;grid-template-columns:repeat(2,minmax(0,1fr));}
  @media (min-width: 720px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr));} }
  @media (min-width: 980px){ .grid{grid-template-columns:repeat(4,minmax(0,1fr));} }
  @media (min-width: 1240px){ .grid{grid-template-columns:repeat(6,minmax(0,1fr));} }

  .card{border:0;background:transparent;padding:0;cursor:zoom-in;transition:transform .14s ease;}
  .card:hover{transform:translateY(-2px);}
  .card img{width:100%;height:auto;display:block;border-radius:var(--radius);box-shadow:var(--shadow);transition:box-shadow .14s ease;background:#fff;}
  .card:hover img{box-shadow:var(--shadowHover);}

  /* Lightbox (super simple + stable) */
  .lb{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:22px;background:rgba(0,0,0,.45);backdrop-filter:blur(8px);}
  .lb.open{display:flex;}
  .panel{max-width:min(700px,90vw);width:100%;background:#fff;border-radius:22px;box-shadow:0 24px 90px rgba(0,0,0,.28);overflow:hidden;position:relative;}
  .panel img{width:100%;height:auto;display:block;}
  .close{position:absolute;top:12px;right:12px;width:40px;height:40px;border-radius:999px;border:0;background:rgba(255,255,255,.75);backdrop-filter:blur(6px);cursor:pointer;font-size:18px;line-height:1;}

  
  .chev{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    font-size:40px;
    line-height:1;
    color:rgba(180,180,180,.9);
    background:transparent;
    border:0;
    padding:12px;
    cursor:pointer;
    opacity:0;
    transition:opacity .25s ease;
    user-select:none;
  }
  .chev.left{left:12px}
  .chev.right{right:12px}
  .lb.show-ui .chev{opacity:.9}


  .close{
    opacity:0;
    transition:opacity .25s ease;
  }
  .lb.show-ui .close{opacity:.9}


  /* Unified chrome behavior: arrows + close auto-hide */
  .chev, .close{
    opacity:0;
    transition:opacity .25s ease;
  }
  .lb.show-ui .chev,
  .lb.show-ui .close{
    opacity:1;
  }

  /* Make close visually match chevrons */
  .close{
    position:absolute;
    top:16px;
    right:16px;
    font-size:26px;
    line-height:1;
    color:rgba(180,180,180,.9);
    background:transparent;
    border:0;
    padding:10px;
    cursor:pointer;
  }


  /* Close icon styled like chevrons */
  .close{
    font-size:34px;
    font-weight:300;
    line-height:1;
    color:rgba(180,180,180,.9);
    background:transparent;
    border:0;
    padding:10px;
    cursor:pointer;
  }

</style>
</head>
<body>

<div class="controlsBar">
  <div class="inner">
    <div class="btnGroup">
      <button class="btn" id="shuffle" type="button">Hussel</button>
      <span class="sep" aria-hidden="true"></span>
      <button class="btn" id="reset" type="button">Reset</button>
    </div>
    <div class="help">Klik om te vergroten • ESC sluit</div>
  </div>
</div>

<div class="grid" id="grid">
    <button class="card" data-src="cards/erkennen-01.svg" aria-label="erkennen-01.svg"><img src="cards/erkennen-01.svg" alt=""></button>
    <button class="card" data-src="cards/erkennen-02.svg" aria-label="erkennen-02.svg"><img src="cards/erkennen-02.svg" alt=""></button>
    <button class="card" data-src="cards/erkennen-03.svg" aria-label="erkennen-03.svg"><img src="cards/erkennen-03.svg" alt=""></button>
    <button class="card" data-src="cards/erkennen-04.svg" aria-label="erkennen-04.svg"><img src="cards/erkennen-04.svg" alt=""></button>
    <button class="card" data-src="cards/erkennen-05.svg" aria-label="erkennen-05.svg"><img src="cards/erkennen-05.svg" alt=""></button>
    <button class="card" data-src="cards/erkennen-06.svg" aria-label="erkennen-06.svg"><img src="cards/erkennen-06.svg" alt=""></button>
    <button class="card" data-src="cards/verbinden-01.svg" aria-label="verbinden-01.svg"><img src="cards/verbinden-01.svg" alt=""></button>
    <button class="card" data-src="cards/verbinden-02.svg" aria-label="verbinden-02.svg"><img src="cards/verbinden-02.svg" alt=""></button>
    <button class="card" data-src="cards/verbinden-03.svg" aria-label="verbinden-03.svg"><img src="cards/verbinden-03.svg" alt=""></button>
    <button class="card" data-src="cards/verbinden-04.svg" aria-label="verbinden-04.svg"><img src="cards/verbinden-04.svg" alt=""></button>
    <button class="card" data-src="cards/verbinden-05.svg" aria-label="verbinden-05.svg"><img src="cards/verbinden-05.svg" alt=""></button>
    <button class="card" data-src="cards/verbinden-06.svg" aria-label="verbinden-06.svg"><img src="cards/verbinden-06.svg" alt=""></button>
    <button class="card" data-src="cards/bewegen-01.svg" aria-label="bewegen-01.svg"><img src="cards/bewegen-01.svg" alt=""></button>
    <button class="card" data-src="cards/bewegen-02.svg" aria-label="bewegen-02.svg"><img src="cards/bewegen-02.svg" alt=""></button>
    <button class="card" data-src="cards/bewegen-03.svg" aria-label="bewegen-03.svg"><img src="cards/bewegen-03.svg" alt=""></button>
    <button class="card" data-src="cards/bewegen-04.svg" aria-label="bewegen-04.svg"><img src="cards/bewegen-04.svg" alt=""></button>
    <button class="card" data-src="cards/bewegen-05.svg" aria-label="bewegen-05.svg"><img src="cards/bewegen-05.svg" alt=""></button>
    <button class="card" data-src="cards/bewegen-06.svg" aria-label="bewegen-06.svg"><img src="cards/bewegen-06.svg" alt=""></button>
    <button class="card" data-src="cards/duiden-01.svg" aria-label="duiden-01.svg"><img src="cards/duiden-01.svg" alt=""></button>
    <button class="card" data-src="cards/duiden-02.svg" aria-label="duiden-02.svg"><img src="cards/duiden-02.svg" alt=""></button>
    <button class="card" data-src="cards/duiden-03.svg" aria-label="duiden-03.svg"><img src="cards/duiden-03.svg" alt=""></button>
    <button class="card" data-src="cards/duiden-04.svg" aria-label="duiden-04.svg"><img src="cards/duiden-04.svg" alt=""></button>
    <button class="card" data-src="cards/duiden-05.svg" aria-label="duiden-05.svg"><img src="cards/duiden-05.svg" alt=""></button>
    <button class="card" data-src="cards/duiden-06.svg" aria-label="duiden-06.svg"><img src="cards/duiden-06.svg" alt=""></button>
    <button class="card" data-src="cards/verdiepen-01.svg" aria-label="verdiepen-01.svg"><img src="cards/verdiepen-01.svg" alt=""></button>
    <button class="card" data-src="cards/verdiepen-02.svg" aria-label="verdiepen-02.svg"><img src="cards/verdiepen-02.svg" alt=""></button>
    <button class="card" data-src="cards/verdiepen-03.svg" aria-label="verdiepen-03.svg"><img src="cards/verdiepen-03.svg" alt=""></button>
    <button class="card" data-src="cards/verdiepen-04.svg" aria-label="verdiepen-04.svg"><img src="cards/verdiepen-04.svg" alt=""></button>
    <button class="card" data-src="cards/verdiepen-05.svg" aria-label="verdiepen-05.svg"><img src="cards/verdiepen-05.svg" alt=""></button>
    <button class="card" data-src="cards/verdiepen-06.svg" aria-label="verdiepen-06.svg"><img src="cards/verdiepen-06.svg" alt=""></button>
    <button class="card" data-src="cards/vertragen-01.svg" aria-label="vertragen-01.svg"><img src="cards/vertragen-01.svg" alt=""></button>
    <button class="card" data-src="cards/vertragen-02.svg" aria-label="vertragen-02.svg"><img src="cards/vertragen-02.svg" alt=""></button>
    <button class="card" data-src="cards/vertragen-03.svg" aria-label="vertragen-03.svg"><img src="cards/vertragen-03.svg" alt=""></button>
    <button class="card" data-src="cards/vertragen-04.svg" aria-label="vertragen-04.svg"><img src="cards/vertragen-04.svg" alt=""></button>
    <button class="card" data-src="cards/vertragen-05.svg" aria-label="vertragen-05.svg"><img src="cards/vertragen-05.svg" alt=""></button>
    <button class="card" data-src="cards/vertragen-06.svg" aria-label="vertragen-06.svg"><img src="cards/vertragen-06.svg" alt=""></button>
</div>

<div class="lb" id="lb" aria-hidden="true">
  <div class="panel" role="dialog" aria-modal="true">
    <button class="chev left" id="prev" aria-label="Vorige">‹</button>
    <button class="chev right" id="next" aria-label="Volgende">›</button>

    <button class="close" id="close" type="button" aria-label="Sluiten">×</button>
    <img id="lbImg" alt="">
  </div>
</div>

<script>
  // Alleen lightbox + hussel, geen render-dependency
  const grid = document.getElementById('grid');
  const lb = document.getElementById('lb');
  const lbImg = document.getElementById('lbImg');
  const closeBtn = document.getElementById('close');

  const initial = Array.from(grid.children).map(n => n.outerHTML);

  function openLb(src){
    lbImg.src = src;
    lb.classList.add('open');
    document.body.style.overflow = 'hidden';
  }
  function closeLb(){
    lb.classList.remove('open');
    lbImg.src = '';
    document.body.style.overflow = '';
  }

  grid.addEventListener('click', (e) => {
    const btn = e.target.closest('button.card');
    if(!btn) return;
    openLb(btn.getAttribute('data-src'));
  });

  lb.addEventListener('click', (e) => { if(e.target === lb) closeLb(); });
  closeBtn.addEventListener('click', closeLb);
  document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && lb.classList.contains('open')) closeLb(); });

  function shuffle(nodes){
    for(let i=nodes.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [nodes[i],nodes[j]]=[nodes[j],nodes[i]]; }
    return nodes;
  }
  document.getElementById('shuffle').addEventListener('click', () => {
    const nodes = Array.from(grid.children);
    shuffle(nodes);
    nodes.forEach(n => grid.appendChild(n));
    window.scrollTo({top:0, behavior:'smooth'});
  });
  document.getElementById('reset').addEventListener('click', () => {
    grid.innerHTML = initial.join('');
    window.scrollTo({top:0, behavior:'smooth'});
  });

  // Subtle navigation (links/rechts) in lightbox
  const cards = Array.from(grid.querySelectorAll('button.card'));
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  let currentIndex = -1;
  let uiTimer = null;

  function showUI(){
      lb.classList.add('show-ui');
      clearTimeout(uiTimer);
      uiTimer = setTimeout(() => lb.classList.remove('show-ui'), 1400);
    }

  function openLbAt(index){
    currentIndex = index;
    openLb(cards[currentIndex].getAttribute('data-src'));
    showUI();
  }

  function go(delta){
    if(currentIndex < 0) return;
    currentIndex = (currentIndex + delta + cards.length) % cards.length;
    lbImg.src = cards[currentIndex].getAttribute('data-src');
    showUI();
  }

  // Override existing open to capture index
  grid.addEventListener('click', (e) => {
    const btn = e.target.closest('button.card');
    if(!btn) return;
    const idx = cards.indexOf(btn);
    if(idx > -1){
      openLbAt(idx);
    }
  });

  prevBtn.addEventListener('click', (e) => { e.stopPropagation(); go(-1); });
  nextBtn.addEventListener('click', (e) => { e.stopPropagation(); go(1); });

  // Keyboard
  document.addEventListener('keydown', (e) => {
    if(!lb.classList.contains('open')) return;
    if(e.key === 'ArrowLeft') go(-1);
    if(e.key === 'ArrowRight') go(1);
  });

  // Swipe (simple)
  let sx = 0;
  lb.addEventListener('touchstart', (e) => { sx = e.touches[0].clientX; }, {passive:true});
  lb.addEventListener('touchend', (e) => {
    const dx = e.changedTouches[0].clientX - sx;
    if(Math.abs(dx) > 40){
      go(dx > 0 ? -1 : 1);
    }
  }, {passive:true});

  // Show UI on interaction
  lb.addEventListener('mousemove', showUI);
  lb.addEventListener('touchstart', showUI, {passive:true});

</script>

</body>
</html>
