<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Praatkaarten v3.7.1</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css?v=3.7.1">
</head>
<body>
<script id="questions-json" type="application/json">
{
  "verkennen": [
    "Wat zien we op dit moment gebeuren in onze samenwerking?",
    "Wat valt ons op in onze manier van samenwerken?",
    "Herkennen we patronen in onze manier van samenwerken?",
    "Waar zijn we aan gewend geraakt?",
    "Wat krijgt nu minder aandacht?",
    "Blijven er dingen onbesproken?"
  ],
  "duiden": [
    "Wat proberen we als team goed te doen?",
    "Wat nemen we wel of niet als vanzelfsprekend aan?",
    "Wanneer helpt afstemming ons, en wanneer belemmert het ons?",
    "Wat maakt dat onze kwaliteiten wel of niet tot hun recht komen?",
    "Welke patronen blijven we terugzien in onze samenwerking?",
    "Welke factoren blijven onbenoemd, terwijl ze wel invloed hebben?"
  ],
  "verbinden": [
    "Waar worden we enthousiast van?",
    "Wanneer voel jij je echt onderdeel van het team?",
    "Mogen er verschillen bestaan in ons team?",
    "Hoe kunnen we elkaar uitdagen en andere kanten belichten?",
    "Wat helpt ons om onszelf te laten zien in de samenwerking?",
    "Wat helpt om eerlijk te zijn, zonder de verbinding te verliezen?"
  ],
  "verhelderen": [
    "Wat is voor ons op dit moment nog onduidelijk in de samenwerking?",
    "Welke aannames doen we (bewust of onbewust) over elkaar of de situatie?",
    "Welke informatie missen we om goed te kunnen samenwerken?",
    "Wat bedoelen we precies als we woorden gebruiken als ‘afstemming’, ‘ruimte’ of ‘tempo’?",
    "Welke verwachtingen spreken we niet uit, maar sturen wel ons gedrag?",
    "Wat zou helpen om de afspraak of werkwijze helder en concreet te maken?"
  ],
  "vertragen": [
    "Wanneer nemen we in onze samenwerking eigenlijk de tijd?",
    "Wat verandert er in onze samenwerking wanneer we een reactie uitstellen?",
    "Wat gebeurt er in onze samenwerking wanneer we het tempo bewust verlagen?",
    "Welke patronen worden zichtbaar wanneer de druk toeneemt?",
    "Welke rol nemen we automatisch aan in momenten van spanning?",
    "Wanneer merken we dat vertragen helpend zou zijn?"
  ],
  "bewegen": [
    "Wat doen we met ideeën die ontstaan?",
    "Wanneer komt er beweging in het team?",
    "Wat helpt ons om van praten naar doen te gaan?",
    "Welke ideeën blijven liggen, en waarom?",
    "Wat houdt ons tegen om in actie te komen?",
    "Wat laten we liggen, terwijl het eigenlijk aandacht vraagt?"
  ]
}
</script>


<header class="topBar" aria-label="Bovenbalk">
  <button id="themePill" class="themePill" type="button" aria-haspopup="dialog" aria-expanded="false"><span id="themePillText">Samenwerken</span></button>

  <div class="topTools" aria-label="Acties">
    <button id="shuffleBtn" class="toolBtn gmFab" type="button" aria-label="Shuffle"><svg class="gmIcon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
  <path d="M16 3h5v5"></path>
  <path d="M4 7h6c1.8 0 3.2.7 4.3 2l.7.8"></path>
  <path d="M21 3l-6 6"></path>
  <path d="M16 21h5v-5"></path>
  <path d="M4 17h6c1.8 0 3.2-.7 4.3-2l.7-.8"></path>
  <path d="M21 21l-6-6"></path>
</svg></button>
    <button id="uitlegBtn" class="toolBtn gmFab" type="button" aria-label="Uitleg"><svg class="gmIcon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
  <circle cx="12" cy="12" r="9"></circle>
  <path d="M12 10.5v6"></path>
  <path d="M12 7.5h.01"></path>
</svg></button>
  </div>
</header>

<div id="themeMenuOverlay" class="menuOverlay" hidden></div>
<section id="themeMenu" class="themeMenu" role="dialog" aria-label="Menu" hidden>
  <div class="menuCard">
    <div class="menuHeader">Thema's</div>
    <div class="menuList">
      <!-- Samenwerken is de huidige context (pill bovenin) en hoort niet als item in dit menu -->
      <button class="menuItem themeItem" data-set="verbinden" type="button">
        <span class="miLabel">Verbinden</span>
        <span class="miThumbRight" aria-hidden="true" style="background-image:url('sets/samenwerken/cards/verbinden.svg')"></span>
      </button>
      <button class="menuItem themeItem" data-set="verkennen" type="button">
        <span class="miLabel">Verkennen</span>
        <span class="miThumbRight" aria-hidden="true" style="background-image:url('sets/samenwerken/cards/verkennen.svg')"></span>
      </button>
      <button class="menuItem themeItem" data-set="duiden" type="button">
        <span class="miLabel">Duiden</span>
        <span class="miThumbRight" aria-hidden="true" style="background-image:url('sets/samenwerken/cards/duiden.svg')"></span>
      </button>
      <button class="menuItem themeItem" data-set="verhelderen" type="button">
        <span class="miLabel">Verhelderen</span>
        <span class="miThumbRight" aria-hidden="true" style="background-image:url('sets/samenwerken/cards/verhelderen.svg')"></span>
      </button>
      <button class="menuItem themeItem" data-set="vertragen" type="button">
        <span class="miLabel">Vertragen</span>
        <span class="miThumbRight" aria-hidden="true" style="background-image:url('sets/samenwerken/cards/vertragen.svg')"></span>
      </button>
      <button class="menuItem themeItem" data-set="bewegen" type="button">
        <span class="miLabel">Bewegen</span>
        <span class="miThumbRight" aria-hidden="true" style="background-image:url('sets/samenwerken/cards/bewegen.svg')"></span>
      </button>
    </div>
<div class="menuFooter">
      <button id="naarOverzicht" class="menuLink" type="button">Naar overzicht</button>
    </div>
  </div>
</section>

<main class="page">
  <div id="grid" class="grid" aria-label="Kaarten"></div>
</main>

<script>
(function(){
  'use strict';

  // ES5-only, iOS-safe query parsing (geen URL/URLSearchParams)
  function getQueryParam(name){
    var s = window.location.search || '';
    if(s.charAt(0)==='?') s=s.substring(1);
    var parts = s.split('&');
    for(var i=0;i<parts.length;i++){ 
      var kv = parts[i].split('=');
      if(decodeURIComponent(kv[0]||'')===name) return decodeURIComponent(kv[1]||'');
    }
    return '';
  }

  function getActiveSet(){
    var s = (getQueryParam('set') || getQueryParam('s') || '').trim();
    return s ? s : 'samenwerken';
  }

  function setBase(){
    // relatieve paden
    return 'sets/' + encodeURIComponent(getActiveSet()) + '/';
  }

  function withV(url){
    return url + (url.indexOf('?')===-1 ? '?' : '&') + 'v=3.7.1.10';
  }


  function setThemePillText(){
    var pillText = document.getElementById('themePillText');
    if(pillText) pillText.textContent = prettyName(getActiveSet());
  }

  function prettyName(setId){
    var s = String(setId||'').toLowerCase();
    if(s==='check-in' || s==='checkin') return 'Check-in';
    if(s==='samenwerken') return 'Samenwerken';
    if(s==='verbinden') return 'Verbinden';
    if(s==='verkennen') return 'Verkennen';
    if(s==='verhelderen') return 'Verhelderen';
    if(s==='vertragen') return 'Vertragen';
    if(s==='bewegen') return 'Bewegen';
    if(s==='teamstart') return 'Teamstart';
    if(s==='reflectie') return 'Reflectie';
    if(s==='spanning') return 'Spanning';
    if(s==='feedback') return 'Feedback';
    if(s==='energie') return 'Energie';
    // fallback: Capitalize
    return s ? (s.charAt(0).toUpperCase()+s.slice(1)) : 'Samenwerken';
  }

  function openMenu(){
    var menu = document.getElementById('themeMenu');
    var overlay = document.getElementById('themeMenuOverlay');
    var pill = document.getElementById('themePill');
    if(menu){ menu.hidden = false; menu.style.display = 'block'; }
    if(overlay){ overlay.hidden = false; overlay.style.display = 'block'; }
    if(pill){ pill.setAttribute('aria-expanded','true'); }
  }

  function closeMenu(){
    var menu = document.getElementById('themeMenu');
    var overlay = document.getElementById('themeMenuOverlay');
    var pill = document.getElementById('themePill');
    if(menu){ menu.hidden = true; menu.style.display = 'none'; }
    if(overlay){ overlay.hidden = true; overlay.style.display = 'none'; }
    if(pill){ pill.setAttribute('aria-expanded','false'); }
  }


  var THEMES = ["verkennen","duiden","verbinden","verhelderen","vertragen","bewegen"];
  var grid = document.getElementById('grid');
  if(!grid) return;

  function parseInlineQuestions(){
    try{
      var el = document.getElementById('questions-json');
      if(el && el.textContent && el.textContent.replace(/\s+/g,'').length) return JSON.parse(el.textContent);
    }catch(e){}
    return null;
  }

  function cardUrl(theme){ return setBase() + 'cards/' + theme + '.svg'; }

  function buildData(qObj){
    var out=[];
    for(var t=0;t<THEMES.length;t++){ 
      var theme=THEMES[t];
      var arr=(qObj && qObj[theme]) ? qObj[theme] : [];
      for(var i=0;i<arr.length;i++){ 
        out.push({ theme:theme, q:String(arr[i]||''), bg:cardUrl(theme) });
      }
    }
    return out;
  }

  function showError(msg){
    grid.innerHTML = '<div style="padding:24px;font-family:system-ui;color:#444;">'+msg+'</div>';
  }

  var qObj = parseInlineQuestions();
  if(!qObj){ showError('Fout bij laden.'); return; }
  var items = buildData(qObj);
  if(!items.length){ showError('Geen kaarten gevonden.'); return; }

  grid.innerHTML='';
  var frag=document.createDocumentFragment();
  for(var k=0;k<items.length;k++){ 
    var it=items[k];
    var btn=document.createElement('button');
    btn.className='card';
    btn.setAttribute('data-theme', it.theme);
    btn.type='button';

    var inner=document.createElement('div');
    inner.className='cardInner';

    var img=document.createElement('img');
    img.className='bg';
    img.src=withV(it.bg);
    img.alt='';

    var q=document.createElement('div');
    q.className='q';
    var span=document.createElement('span');
    span.className='qText';
    span.textContent=it.q;
    q.appendChild(span);

    inner.appendChild(img);
    inner.appendChild(q);
    btn.appendChild(inner);
    frag.appendChild(btn);
  }
  grid.appendChild(frag);

  setThemePillText();

  // Menu wiring
  var pillBtn = document.getElementById('themePill');
  if(pillBtn){
    pillBtn.onclick = function(){
      var expanded = pillBtn.getAttribute('aria-expanded') === 'true';
      if(expanded) closeMenu(); else openMenu();
    };
  }
  var overlay = document.getElementById('themeMenuOverlay');
  if(overlay){ overlay.onclick = closeMenu; }

  var itemsBtns = document.querySelectorAll('.menuItem');
  for(var mi=0; mi<itemsBtns.length; mi++){
    itemsBtns[mi].onclick = function(){
      var setId = (this.getAttribute('data-set') || '').trim();
      if(!setId) return;

      // Samenwerken = bovenaan (start)
      if(setId === 'samenwerken'){
        window.scrollTo({ top: 0, behavior: 'smooth' });
        setThemePillText('Samenwerken');
        closeMenu();
        setTimeout(closeMenu, 0);
        return;
      }

      // Scroll naar de eerste kaart van dit thema
      var target = grid.querySelector('.card[data-theme="' + setId + '"]');
      if(target && target.scrollIntoView){
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      setThemePillText(capitalizeTheme(setId));
      closeMenu();
    };
  }

  var naarOverzicht = document.getElementById('naarOverzicht');
  if(naarOverzicht){
    naarOverzicht.onclick = function(){
      closeMenu();
      // placeholder: naar index zonder set param
      window.location.href = 'index.html';
    };
  }

  // Esc sluit menu (desktop)
  document.addEventListener('keydown', function(ev){
    ev = ev || window.event;
    if(ev.key === 'Escape') closeMenu();
  });


  // Buttons
  var shuffleBtn = document.getElementById('shuffleBtn');
  if(shuffleBtn){
    shuffleBtn.onclick = function(){
      var cards = Array.prototype.slice.call(grid.querySelectorAll('.card'));
      for(var i=cards.length-1;i>0;i--){
        var j=Math.floor(Math.random()*(i+1));
        var tmp=cards[i]; cards[i]=cards[j]; cards[j]=tmp;
      }
      grid.innerHTML='';
      for(var k2=0;k2<cards.length;k2++) grid.appendChild(cards[k2]);
    };
  }

  var uitlegBtn = document.getElementById('uitlegBtn');
  if(uitlegBtn){
    uitlegBtn.onclick = function(){
      window.location.href = 'uitleg/uitleg.html?set=' + encodeURIComponent(getActiveSet());
    };
  }

})();
</script>
<script>
// v20: theme menu click -> scroll to section + update pill (no reload)
(function(){
  function qs(sel, root=document){ return root.querySelector(sel); }
  function qsa(sel, root=document){ return Array.from(root.querySelectorAll(sel)); }

  function scrollToTheme(setId){
    // theme sections are assumed to have data-theme or id anchors; fallback: first card with data-set
    const anchor = document.querySelector('[data-theme="'+setId+'"], #theme-'+setId+', [data-set="'+setId+'"]');
    if(anchor){
      anchor.scrollIntoView({behavior:'smooth', block:'start'});
    }
  }

  function setPillText(txt){
    const el = qs('#themePillText');
    if(el) el.textContent = txt;
  }

  function closeMenu(){
    const menu = qs('#themeMenu');
    const pill = qs('#themePill');
    if(menu) menu.classList.remove('open');
    if(pill) pill.setAttribute('aria-expanded','false');
  }

  qsa('.menuItem.themeItem').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const setId = (btn.getAttribute('data-set')||'').toLowerCase();
      const label = (btn.querySelector('.miLabel')?.textContent || '').trim();
      if(label) setPillText(label);
      closeMenu();
      scrollToTheme(setId);
    }, {passive:true});
  });
})();
</script>
</body>
</html>
